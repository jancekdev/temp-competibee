
{% extends "allauth/layouts/entrance.html" %}
{% load allauth i18n %}
{% load socialaccount %}

{% block head_title %}{% trans "Sign In" %}{% endblock head_title %}

{% block content %}

  <div class="mt-10 sm:mx-auto sm:w-full sm:max-w-[480px]">
    <div class="bg-neutral-950/30 backdrop-blur-sm px-6 py-12 outline outline-1 -outline-offset-1 outline-white/10 shadow-2xl sm:rounded-2xl sm:px-12">
      <form method="POST" action="{% url 'account_login' %}" class="space-y-6">
        {% csrf_token %}
        
        {% if form.non_field_errors %}
          <div class="rounded-lg bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 p-4">
            <h3 class="text-sm font-medium text-red-900 dark:text-red-200">{{ form.non_field_errors }}</h3>
          </div>
        {% endif %}

        <div>
          <label for="id_login" class="block text-sm font-medium text-white mb-2">Email address</label>
          <div class="mt-2">
            <input id="id_login" type="email" name="login" required autocomplete="email" class="block w-full rounded-lg bg-neutral-800/50 border border-neutral-700 px-3 py-2 text-white placeholder:text-gray-400 focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-transparent transition-colors duration-200" />
          </div>
        </div>

        <div x-data="{ showPassword: false }">
          <label for="id_password" class="block text-sm font-medium text-white mb-2">Password</label>
          <div class="mt-2 relative">
            <input id="id_password" :type="showPassword ? 'text' : 'password'" name="password" required autocomplete="current-password" class="block w-full rounded-lg bg-neutral-800/50 border border-neutral-700 px-3 py-2 pr-10 text-white placeholder:text-gray-400 focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-transparent transition-colors duration-200" />
            <button type="button" 
                    @click="showPassword = !showPassword"
                    class="absolute inset-y-0 right-0 flex items-center pr-3 text-gray-400 hover:text-white transition-colors duration-200">
              <!-- Eye Icon (hidden) -->
              <svg x-show="!showPassword" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" d="M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.639 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.639 0-8.573-3.007-9.963-7.178Z" />
                <path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z" />
              </svg>
              <!-- Eye Slash Icon (visible) -->
              <svg x-show="showPassword" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" d="M3.98 8.223A10.477 10.477 0 0 0 1.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.451 10.451 0 0 1 12 4.5c4.756 0 8.773 3.162 10.065 7.498a10.522 10.522 0 0 1-4.293 5.774M6.228 6.228 3 3m3.228 3.228 3.65 3.65m7.894 7.894L21 21m-3.228-3.228-3.65-3.65m0 0a3 3 0 1 1-4.243-4.243m4.242 4.242L9.88 9.88" />
              </svg>
            </button>
          </div>
        </div>

        <div class="flex items-center justify-between">
          <div class="flex gap-3">
            <div class="flex h-6 shrink-0 items-center">
              <div class="group grid size-4 grid-cols-1">
                <input id="id_remember" type="checkbox" name="remember" class="col-start-1 row-start-1 appearance-none rounded-sm border border-white/10 bg-white/5 checked:border-teal-500 checked:bg-teal-500 indeterminate:border-teal-500 indeterminate:bg-teal-500 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-teal-500 disabled:border-gray-300 disabled:bg-gray-100 disabled:checked:bg-gray-100 forced-colors:appearance-auto" />
                <svg viewBox="0 0 14 14" fill="none" class="pointer-events-none col-start-1 row-start-1 size-3.5 self-center justify-self-center stroke-white group-has-disabled:stroke-white/25">
                  <path d="M3 8L6 11L11 3.5" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="opacity-0 group-has-checked:opacity-100" />
                  <path d="M3 7H11" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="opacity-0 group-has-indeterminate:opacity-100" />
                </svg>
              </div>
            </div>
            <label for="id_remember" class="block text-sm text-white">Remember me</label>
          </div>

          <div class="text-sm">
            <a href="{% url 'account_reset_password' %}" class="font-semibold text-blue-500 hover:text-blue-600 underline">Forgot password?</a>
          </div>
        </div>

        <div>
          <button type="submit" class="flex w-full justify-center rounded-lg bg-teal-600 px-4 py-3 text-sm font-semibold text-white transition-all duration-200 hover:bg-teal-700 focus:outline-none focus:ring-2 focus:ring-teal-500 focus:ring-offset-2 focus:ring-offset-neutral-900">Sign in</button>
        </div>
      </form>

      <div>
        <div class="mt-10 flex items-center gap-x-6">
          <div class="w-full flex-1 border-t border-white/10"></div>
          <p class="text-sm font-medium text-nowrap text-white">Or continue with</p>
          <div class="w-full flex-1 border-t border-white/10"></div>
        </div>

        <div class="mt-6 grid grid-cols-2 gap-4">
          {% if SOCIALACCOUNT_ENABLED %}
            {% get_providers as providers %}
            {% for provider in providers %}
              <a href="{% provider_login_url provider.id %}" class="flex w-full items-center justify-center gap-3 rounded-md bg-white/10 px-3 py-2 text-sm font-semibold text-white inset-ring inset-ring-white/5 hover:bg-white/20 focus-visible:inset-ring-transparent">
                {% if provider.id == "google" %}
                  <svg viewBox="0 0 24 24" aria-hidden="true" class="h-5 w-5">
                    <path d="M12.0003 4.75C13.7703 4.75 15.3553 5.36002 16.6053 6.54998L20.0303 3.125C17.9502 1.19 15.2353 0 12.0003 0C7.31028 0 3.25527 2.69 1.28027 6.60998L5.27028 9.70498C6.21525 6.86002 8.87028 4.75 12.0003 4.75Z" fill="#EA4335" />
                    <path d="M23.49 12.275C23.49 11.49 23.415 10.73 23.3 10H12V14.51H18.47C18.18 15.99 17.34 17.25 16.08 18.1L19.945 21.1C22.2 19.01 23.49 15.92 23.49 12.275Z" fill="#4285F4" />
                    <path d="M5.26498 14.2949C5.02498 13.5699 4.88501 12.7999 4.88501 11.9999C4.88501 11.1999 5.01998 10.4299 5.26498 9.7049L1.275 6.60986C0.46 8.22986 0 10.0599 0 11.9999C0 13.9399 0.46 15.7699 1.28 17.3899L5.26498 14.2949Z" fill="#FBBC05" />
                    <path d="M12.0004 24.0001C15.2404 24.0001 17.9654 22.935 19.9454 21.095L16.0804 18.095C15.0054 18.82 13.6204 19.245 12.0004 19.245C8.8704 19.245 6.21537 17.135 5.2654 14.29L1.27539 17.385C3.25539 21.31 7.3104 24.0001 12.0004 24.0001Z" fill="#34A853" />
                  </svg>
                {% elif provider.id == "github" %}
                  <svg aria-hidden="true" viewBox="0 0 24 24" class="h-5 w-5 fill-current">
                    <path d="M12 .5C5.373.5 0 5.872 0 12.5c0 5.302 3.438 9.8 8.207 11.387.6.111.793-.261.793-.58 0-.287-.01-1.046-.016-2.053-3.338.727-4.042-1.61-4.042-1.61-.546-1.387-1.333-1.757-1.333-1.757-1.09-.744.082-.729.082-.729 1.204.085 1.838 1.236 1.838 1.236 1.07 1.833 2.809 1.303 3.492.996.108-.776.42-1.303.762-1.603-2.665-.304-5.467-1.332-5.467-5.93 0-1.31.469-2.381 1.236-3.221-.124-.303-.536-1.524.117-3.176 0 0 1.008-.323 3.3 1.23a11.49 11.49 0 0 1 3.003-.404 11.46 11.46 0 0 1 3.003.404c2.29-1.553 3.297-1.23 3.297-1.23.655 1.652.243 2.873.119 3.176.77.84 1.235 1.911 1.235 3.221 0 4.61-2.807 5.624-5.479 5.92.431.372.815 1.104.815 2.226 0 1.608-.015 2.904-.015 3.299 0 .321.19.696.8.578C20.565 22.297 24 17.8 24 12.5 24 5.872 18.627.5 12 .5Z" />
                  </svg>
                {% elif provider.id == "microsoft" %}
                  <svg aria-hidden="true" viewBox="0 0 24 24" class="h-5 w-5 fill-current">
                    <path d="M11.25 3H3v8.25h8.25V3Zm0 9.75H3V21h8.25v-8.25Zm1.5-9.75V11.25H21V3h-8.25Zm0 18H21v-8.25h-8.25V21Z" />
                  </svg>
                {% elif provider.id == "twitter" or provider.id == "twitter_oauth2" %}
                  <svg aria-hidden="true" viewBox="0 0 24 24" class="h-5 w-5 fill-current">
                    <path d="M22 4.01c-.77.35-1.6.58-2.46.69a4.15 4.15 0 0 0 1.82-2.3 8.3 8.3 0 0 1-2.63 1 4.13 4.13 0 0 0-7.23 2.82c0 .33.04.66.11.97A11.71 11.71 0 0 1 3.15 3.16a4.12 4.12 0 0 0 1.28 5.5 4.09 4.09 0 0 1-1.87-.52v.05c0 2 1.42 3.72 3.32 4.1-.35.1-.73.15-1.12.15-.27 0-.54-.02-.8-.07a4.14 4.14 0 0 0 3.85 2.87A8.3 8.3 0 0 1 2 17.53a11.73 11.73 0 0 0 6.29 1.84c7.55 0 11.68-6.26 11.68-11.68 0-.18-.01-.35-.02-.53A8.33 8.33 0 0 0 22 4.01Z" />
                  </svg>
                {% else %}
                  <span class="flex h-5 w-5 items-center justify-center rounded-full bg-white/10 text-[10px] font-semibold uppercase">{{ provider.name|slice:":1" }}</span>
                {% endif %}
                <span class="text-sm font-semibold">{{ provider.name }}</span>
              </a>
            {% endfor %}
          {% endif %}
        </div>
      </div>
    </div>
  </div>
{% endblock content %}
{% block bottom_text %}
<p class="text-center text-sm text-gray-400">
  Not a member?
  <a href="{% url 'account_signup' %}" class="font-semibold text-teal-400 hover:text-teal-300">Sign up</a>
</p>
{% endblock bottom_text %}

