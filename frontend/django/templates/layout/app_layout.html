{% extends "base.html" %}{% block body %}
<div
  class="antialiased bg-neutral-50 dark:bg-neutral-900"
  x-data="{ mobileMenuOpen: false }"
>
  <nav
    class="bg-neutral-50 border-b border-neutral-200 px-4 py-2.5 dark:bg-neutral-800 dark:border-neutral-700 fixed left-0 right-0 top-0 z-50"
  >
    <div class="flex flex-wrap justify-between items-center">
      <!-- Left section: Burger menu and logo -->
      <div class="flex justify-start items-center">
        <button
          @click="mobileMenuOpen = !mobileMenuOpen"
          aria-controls="drawer-navigation"
          :aria-expanded="mobileMenuOpen"
          class="p-2 mr-2 text-neutral-600 rounded-lg cursor-pointer md:hidden hover:text-neutral-900 hover:bg-neutral-100 focus:bg-neutral-100 dark:focus:bg-neutral-700 focus:ring-2 focus:ring-neutral-100 dark:focus:ring-neutral-700 dark:text-neutral-400 dark:hover:bg-neutral-700 dark:hover:text-neutral-100"
        >
          <svg
            x-show="!mobileMenuOpen"
            aria-hidden="true"
            class="w-6 h-6"
            fill="currentColor"
            viewBox="0 0 20 20"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              fill-rule="evenodd"
              d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h6a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z"
              clip-rule="evenodd"
            ></path>
          </svg>
          <svg
            x-show="mobileMenuOpen"
            aria-hidden="true"
            class="w-6 h-6"
            fill="currentColor"
            viewBox="0 0 20 20"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              fill-rule="evenodd"
              d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z"
              clip-rule="evenodd"
            ></path>
          </svg>
          <span class="sr-only">Toggle sidebar</span>
        </button>
        <a href="" class="flex items-center">
          <img
            src="{% load static %}{% static 'images/logo.svg' %}"
            class="h-8"
            alt="Your logo here"
          />
          <span
            class="hidden sm:block ml-3 text-lg font-semibold whitespace-nowrap dark:text-white"
            >temp competibee</span>
        </a>
      {% comment %} TODO: Search component if needed {% endcomment %}
      {% comment %}
      <!-- Center section: Search form -->
      <div class="flex-1 flex justify-center px-4">
        <form action="#" method="GET" class="hidden md:block w-full max-w-lg">
          <label for="topbar-search" class="sr-only">Search</label>
          <div class="relative w-full">
            <div
              class="flex absolute inset-y-0 left-0 items-center pl-3 pointer-events-none"
            >
              <svg
                class="w-5 h-5 text-neutral-500 dark:text-neutral-400"
                fill="currentColor"
                viewBox="0 0 20 20"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  fill-rule="evenodd"
                  clip-rule="evenodd"
                  d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z"
                ></path>
              </svg>
            </div>
            <input
              type="text"
              name="email"
              id="topbar-search"
              class="bg-neutral-50 border border-neutral-300 text-neutral-900 text-sm rounded-2xl focus:ring-teal-500 focus:border-teal-500 focus:outline-none block w-full pl-10 p-2.5 dark:bg-neutral-700 dark:border-neutral-600 dark:placeholder-neutral-400 dark:text-white dark:focus:ring-teal-500 dark:focus:border-teal-500"
              placeholder="Search"
            />
          </div>
        </form>
      </div>
      {% endcomment %}
      <div class="flex items-center lg:order-2">
        <!-- Admin Button (for staff/superuser) -->
        {% if user.is_staff or user.is_superuser %}
        <a
          href="{% url 'admin:index' %}"
          class="p-2 mr-1 text-orange-600 rounded-lg hover:text-orange-700 hover:bg-orange-50 dark:text-orange-400 dark:hover:text-orange-300 dark:hover:bg-orange-900/20 focus:ring-4 focus:ring-orange-300 dark:focus:ring-orange-600"
          title="Django Admin"
        >
          <span class="sr-only">Django Admin</span>
          <!-- Shield/Admin icon -->
          <svg
            aria-hidden="true"
            class="w-6 h-6"
            fill="currentColor"
            viewBox="0 0 20 20"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              fill-rule="evenodd"
              d="M2.166 4.999A11.954 11.954 0 0010 1.944 11.954 11.954 0 0017.834 5c.11.65.166 1.32.166 2.001 0 5.225-3.34 9.67-8 11.317C5.34 16.67 2 12.225 2 7c0-.682.057-1.35.166-2.001zm11.541 3.708a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"
              clip-rule="evenodd"
            />
          </svg>
        </a>
        {% endif %}

        <!-- User Profile Menu -->
        <div x-data="{ open: false }" class="relative">
          <button
            type="button"
            @click="open = !open"
            class="flex items-center justify-center w-10 h-10 mx-3 text-sm bg-neutral-200 hover:bg-neutral-300 dark:bg-neutral-700 dark:hover:bg-neutral-600 rounded-full md:mr-0 focus:ring-4 focus:ring-teal-300 dark:focus:ring-teal-600 focus:outline-none transition-colors duration-200"
            id="user-menu-button"
            aria-expanded="false"
          >
            <span class="sr-only">Open user menu</span>
            <svg
              class="w-5 h-5 text-neutral-600 dark:text-neutral-300"
              fill="currentColor"
              viewBox="0 0 20 20"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                fill-rule="evenodd"
                d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z"
                clip-rule="evenodd"
              />
            </svg>
          </button>
          <!-- Dropdown menu -->
          <div
            x-show="open"
            @click.outside="open = false"
            x-transition
            class="absolute right-0 z-50 my-4 w-56 text-base list-none bg-neutral-50 rounded divide-y divide-neutral-100 shadow dark:bg-neutral-700 dark:divide-neutral-600 rounded-xl"
            id="dropdown"
          >
            <div class="py-3 px-4">
              <span
                class="block text-sm font-semibold text-neutral-900 dark:text-white"
                >{{ user.name|default:user.email }}</span
              >
              <span
                class="block text-sm text-neutral-900 truncate dark:text-white"
                >{{ user.email }}</span
              >
            </div>
            <ul
              class="py-1 text-neutral-700 dark:text-neutral-300"
              aria-labelledby="dropdown"
            >
              <li>
                <a
                  href="{% url 'users:account_settings' %}"
                  class="block py-2 px-4 text-sm hover:bg-neutral-100 dark:hover:bg-neutral-600 dark:text-white dark:hover:text-neutral-100"
                  >Account settings</a
                >
              </li>
            </ul>
            <ul
              class="py-1 text-neutral-700 dark:text-neutral-300"
              aria-labelledby="dropdown"
            >
              <li>
                <!-- TODO: use actual price id -->
                <a
                  href="{% url 'payments:checkout' 'price_id_goes_here' %}"
                  class="flex justify-between items-center py-2 px-4 text-sm hover:bg-neutral-100 dark:hover:bg-neutral-600 dark:hover:text-neutral-100"
                >
                  <span class="flex items-center">
                    <svg
                      aria-hidden="true"
                      class="mr-2 w-5 h-5 text-primary-600 dark:text-primary-500"
                      fill="currentColor"
                      viewBox="0 0 20 20"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <path
                        fill-rule="evenodd"
                        d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03zM12.12 15.12A3 3 0 017 13s.879.5 2.5.5c0-1 .5-4 1.25-4.5.5 1 .786 1.293 1.371 1.879A2.99 2.99 0 0113 13a2.99 2.99 0 01-.879 2.121z"
                        clip-rule="evenodd"
                      ></path>
                    </svg>
                    Pro version
                  </span>
                  <svg
                    aria-hidden="true"
                    class="w-5 h-5 text-neutral-400"
                    fill="currentColor"
                    viewBox="0 0 20 20"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      fill-rule="evenodd"
                      d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z"
                      clip-rule="evenodd"
                    ></path>
                  </svg>
                </a>
              </li>
            </ul>
            <ul
              class="py-1 text-neutral-700 dark:text-neutral-300"
              aria-labelledby="dropdown"
            >
              <li>
                <a
                  href="{% url 'account_logout' %}"
                  class="block py-2 px-4 text-sm hover:bg-neutral-100 dark:hover:bg-neutral-600 dark:hover:text-neutral-100"
                  >Sign out</a
                >
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </nav>

  <!-- Sidebar -->

  <!-- Mobile backdrop -->
  <div
    x-show="mobileMenuOpen"
    x-transition:enter="transition-opacity ease-linear duration-300"
    x-transition:enter-start="opacity-0"
    x-transition:enter-end="opacity-100"
    x-transition:leave="transition-opacity ease-linear duration-300"
    x-transition:leave-start="opacity-100"
    x-transition:leave-end="opacity-0"
    @click="mobileMenuOpen = false"
    class="fixed inset-0 z-30 bg-neutral-900 bg-opacity-75 md:hidden"
  ></div>

  <aside
    class="fixed top-0 left-0 z-40 w-52 h-screen pt-14 transition-transform bg-neutral-50 border-r border-neutral-200 dark:bg-neutral-800 dark:border-neutral-700"
    :class="mobileMenuOpen ? 'translate-x-0' : '-translate-x-full md:translate-x-0'"
    aria-label="Sidenav"
    id="drawer-navigation"
  >
    <div
      class="overflow-y-auto py-5 px-3 h-full bg-neutral-50 dark:bg-neutral-800"
    >
      <form action="#" method="GET" class="md:hidden mb-2">
        <label for="sidebar-search" class="sr-only">Search</label>
        <div class="relative">
          <div
            class="flex absolute inset-y-0 left-0 items-center pl-3 pointer-events-none"
          >
            <svg
              class="w-5 h-5 text-neutral-500 dark:text-neutral-400"
              fill="currentColor"
              viewBox="0 0 20 20"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                fill-rule="evenodd"
                clip-rule="evenodd"
                d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z"
              ></path>
            </svg>
          </div>
          <input
            type="text"
            name="search"
            id="sidebar-search"
            class="bg-neutral-50 border border-neutral-300 text-neutral-900 text-sm rounded-lg focus:ring-teal-500 focus:border-teal-500 focus:outline-none block w-full pl-10 p-2 dark:bg-neutral-700 dark:border-neutral-600 dark:placeholder-neutral-400 dark:text-white dark:focus:ring-teal-500 dark:focus:border-teal-500"
            placeholder="Search"
          />
        </div>
      </form>
      <ul class="space-y-1">
        <li>
          <a
            href="{% url 'core:dashboard' %}"
            class="flex items-center p-2 text-sm font-medium text-neutral-900 rounded-lg dark:text-white hover:bg-neutral-200 dark:hover:bg-neutral-600 group"
          >
            <svg
              aria-hidden="true"
              class="w-6 h-6 text-neutral-500 transition duration-75 dark:text-neutral-400 group-hover:text-neutral-900 dark:group-hover:text-neutral-100"
              fill="currentColor"
              viewBox="0 0 20 20"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z"
              ></path>
            </svg>
            <span class="ml-3">Dashboard</span>
          </a>
        </li>
        
        
        <li>
          <a
            href="{% url 'core:background_tasks' %}"
            class="flex items-center p-2 text-sm font-medium text-neutral-900 rounded-lg dark:text-white hover:bg-neutral-200 dark:hover:bg-neutral-600 group"
          >
            <svg
              aria-hidden="true"
              class="w-6 h-6 text-neutral-500 transition duration-75 dark:text-neutral-400 group-hover:text-neutral-900 dark:group-hover:text-neutral-100"
              fill="currentColor"
              viewBox="0 0 20 20"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                fill-rule="evenodd"
                d="M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z"
                clip-rule="evenodd"
              ></path>
            </svg>
            <span class="ml-3">Background Tasks</span>
          </a>
        </li>
        
      </ul>
    </div>
  </aside>

  <main class="p-16 md:ml-52 h-auto pt-22 text-white text-sm">
    {% block content %}{% endblock content %}
  </main>
</div>

{% endblock body%}
